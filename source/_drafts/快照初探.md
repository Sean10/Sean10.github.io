---
title: 快照初探
subtitle: tech
date: 2023-04-16 23:05:12
updated:
tags: [快照, snap]
categories: [专业]
---


# 功能


-   **数据瞬时备份：**可创建保障数据一致性的磁盘数据快照，使RPO为0；
-   **数据快速恢复：**当出现数据灾难，通过快照点进行回退，极具降低RTO；
-   **数据分析：**将快照数据作为数据分析使用，不占用业务系统性能；
-   **应用测试：**将数据快照卷挂在给测试主机作为新应用或操作系统的测试数据，使得生产数据不受影响；

# 常见方案

SNIA 将快照的实现方式表述为：镜像分离(split mirror)、改变块(changed block)、并发(concurrent)三大类。后两种在实现时其实质就是写时复制及I/O重定向。对于 split mirror 的方式，由于其灵活性以及开销问题，在实际的存储系统中，并不实用。

## COW

### COFW (**Copy-On-First-Write**)

### 异步COW



## ROW





# 快照demo阅读




[LevelDB源码阅读\-\-快照snapshot \| 成长录\-知行合一](https://www.a-programmer.top/2020/04/19/LevelDB%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB--%E5%BF%AB%E7%85%A7snapshot/)