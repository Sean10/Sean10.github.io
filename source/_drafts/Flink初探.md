---
title: Flink初探
subtitle: tech
date: 2018-08-29 23:26:23
updated:
tags: [Flink, 大数据, 流处理, 批处理]
categories: [专业]
---

阿里巴巴 Flink

并行和 分布式的

Flink是一个主结构的分布式系统，其Master被成为JobManager,其Slave（worker）被成为TaskManager；Flink管理分配资源的单位是Slot。

流处理和 批处理

仅批处理框架：

Apache Hadoop

仅流处理框架：

Apache Storm

Apache Samza

混合框架：

Apache Spark

Apache Flink

Apache Samza是一种与Apache Kafka消息系统紧密绑定的流处理框架。虽然Kafka可用于很多流处理系统，但按照设计，Samza可以更好地发挥Kafka独特的架构优势和保障。该技术可通过Kafka提供容错、缓冲，以及状态存储。

Samza可使用YARN作为资源管理器。这意味着默认情况下需要具备Hadoop集群（至少具备HDFS和YARN），但同时也意味着Samza可以直接使用YARN丰富的内建功能。

作者：大诗兄_zl
链接：https://www.jianshu.com/p/5cc07eae1a0c
來源：简书
简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。

流处理与批处理的不同，主要是数据获取的方式不同。

流处理的数据，就像流水一样，一直在系统中流动处理。

批处理的数据，则是暂存于数据库中的离线数据，后期定时定量的一批一批的处理。

 

1、系统的输入包括两类数据：实时的流式数据和静态的离线数据。

流式数据：前端设备实时发送的识别数据、GPS数据等，是通过消息中间件实现的事件触发，推送至系统的。

离线数据：应用需要用到的基础数据（提前梳理好的）等关系数据库中的离线数据，是通过数据库读取接口获取而批量处理的系统。
2、系统的输出也包括流式数据和离线数据。

流式数据是写入消息中间件的指定数据队列缓存，可以被异步推送至其他业务系统。

离线数据是计算结果，直接通过接口写入业务系统的关系型数据库。
3、业务的计算结果输出方式是通过两个条件决定的。

一、结果产生的频率：若计算结果产生的频率可能会较高，则结果以流式数据的形式写入消息中间件。（比如要实时监控该客户所拥有的标签，也就是说要以极高的速度被返回，这类结果以流式数据形式被写入消息中间件。） 这是因为数据库的吞吐量很可能无法适应告诉数据的存取需求。

二、结果需要写入的数据库表规模：若需要插入结果的数据表已经很庞大，则结果以流式数据的形式写入消息中间件，待应用层程序实现相关队列数据的定期或定量的批量数据库转储。（比如宽表异常庞大，每次查询数据库就会有很高的延迟，那么就将结果信息暂时存入中间件层，晚些时候再定时或定量的进行批量数据库转储） 。这是因为大数据表的读取和写入操作对毫秒级别的相应时间仍是无能为力。 若以上两个条件均无要求，结果可以直接写入数据库的相应表中。

第一，Flink 是一个纯流式系统，吞吐量实际测试可达 100K EPS。而不像某些框架是用 mini batch 的模式来达到所谓的流式处理的；

第二，面对不同的用户数据格式，我们必须支持多种数据源，这一点上 Flink 内置的对多种数据源的支持（CSV，Kafka，Hbase，Text，Socket 数据等）也为用户数据的接入提供了便利；

第三，Flink 强大的窗口机制（包括翻转窗口，滑动窗口，session 窗口，全窗口以及允许用户自定义窗口）可以满足复杂的业务逻辑，使得用户可以编写复杂的业务规则；

第四，Flink 内置的 RocksDB 数据存储格式使其数据处速度快且资源消耗少，在 Checkpoint 上起到了至关重要的作用；

第五，Flink 对算子（operator）的高可控性，使得用户可以灵活添加删除或更改算子行为。这一点对于动态部署有着至关重要的意义。
# 笔记记录:

现在常用的3种流处理、批处理框架JStorm, Spark Streaming, Flink。

现在主要接收的数据源还是以Kafka为主

Flink虽然既支持流处理，也支持批处理，但是架构的底层其实还是流处理

Hadoop写MapReduce麻烦，所以现在都写SQL，由软件从SQL来生成Map Reduce任务。Table都支持SQL。

有必要学习一下Calcite这个ETL解析的原理，据说无论是做什么，终究需要会一个ETL工具。

Flink China社区，用钉钉。

张海涛大神，是Apache Beam的发起人之一。

Flink比Spark Steaming（微批处理）要快


# ELT

数据仓库， Extraction Loading Transformation


