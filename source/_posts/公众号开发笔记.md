---
title: 公众号开发笔记
date: 2018-03-06 15:49:46
updated:
tags: [微信]
categories: [专业]
---

试着用微信公众号来做一些bot的任务，这里稍稍记些笔记吧。

<!--more-->

首先，id/secret/token设置需要记录下。测试接口似乎可以使用ngrok这样工具。

未认证的订阅号的被动回复权限理论上是满足我的需求了的。



------

# 遇到问题:

## 在用搬瓦工服务器处理消息时，似乎那边收不到我的消息，但是认证token那个收发包过程还是通过了的，暂时怀疑是服务器端口冲突了。但是iptables并没有查到冲突问题，用nginx映射时倒是才提示端口已占用。

## 在centos6安装python时，出现了
`ModuleNotFoundError: No module named '_sqlite3'`,在[SF](https://stackoverflow.com/questions/1210664/no-module-named-sqlite3)，似乎是python3.6移除了3.5中的_sqlite3.so，不过按照最高票的cp python2的module过去再altinstall会引发新的`ImportError: dynamic module does not define module export function (PyInit__sqlite3)`

最后，只是configure时(添加个动态库选项)[http://blog.csdn.net/jaket5219999/article/details/53512071]就可以了。

```
./configure --enable-loadable-sqlite-extensions
make && make install
```

# 参考资料:
1. https://stackoverflow.com/questions/1210664/no-module-named-sqlite3
2. https://stackoverflow.com/questions/16018463/difference-in-details-between-make-install-and-make-altinstall
3. http://blog.csdn.net/jaket5219999/article/details/53512071
